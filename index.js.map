{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export default function generateImageElementsFromJSON(json) {\n\n  const createHTMLElementsFromString = (htmlString) => {\n    let div = document.createElement('div');\n    div.innerHTML = htmlString.trim();\n    return div.firstChild;\n  }\n\n  let allImagesFrag = new DocumentFragment();\n  if (json.length > 0) {\n    json.forEach((image) => {\n      const { largeImageURL, webformatURL, likes, views, comments, downloads } = image;\n      allImagesFrag.appendChild(createHTMLElementsFromString(`\n        <div class=\"gallery-item\">\n              <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img\n                  class=\"gallery-image\"\n                  src=\"${webformatURL}\"\n                />\n              </a>\n              <div class=\"bottom-panel\">\n              <div class=\"icon-wrapper\">\n                <div class=\"like-chip\">\n                  <span class=\"material-symbols-outlined\">thumb_up</span>\n                  <p class=\"like-number chip-text\">${likes}</p>\n                </div>\n                <div class=\"like-chip\">\n                  <span class=\"material-symbols-outlined\">visibility</span>\n                  <p class=\"like-number chip-text\">${views}</p>\n                </div>\n                <div class=\"like-chip\">\n                  <span class=\"material-symbols-outlined\">chat</span>\n                  <p class=\"like-number chip-text\">${comments}</p>\n                </div>\n                <div class=\"like-chip\">\n                  <span class=\"material-symbols-outlined\">download</span>\n                  <p class=\"like-number chip-text\">${downloads}</p>\n                </div>\n                </div>\n              </div>\n        </div>`\n      ));\n    });\n  }else {\n    allImagesFrag.appendChild(createHTMLElementsFromString(`\n        <div class=\"not-found\">\n              <span class=\"material-symbols-outlined\">search_off</span>\n              <p>Sorry, there are no images matching your search query. Please try again!</p>\n        </div>`\n    ));\n  }\n  allImagesFrag.children[0].classList.add('scroll');\n  return allImagesFrag;\n}","\nimport SimpleLightBox from 'simplelightbox';\nimport axios from 'axios';\n\n\n\nlet box = new SimpleLightBox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n  showCounter: false,\n});\n\nconst returnData = {\n  maxPages:1,\n  data:{}\n};\n\nexport default async function injectElementsDataFromPixaBaySearch (key, searchVal='flower', page = 1, perPage= 20) {\n  const requestOptions = {\n    key: key,\n    q: searchVal,\n    image_type: 'photo',\n    orientation: 'portrait',\n    safesearch: 'true',\n    page:page,\n    per_page: perPage,\n  };\n\n  let data = await axios.get(`https://pixabay.com/api/`, {\n    params: requestOptions\n  })\n  returnData.data = data.data.hits;\n  returnData.maxPages = Math.ceil(data.data.totalHits / perPage);\n  return returnData;\n}\n\n","import './js/render-functions.js';\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport injectElementsDataFromPixaBaySearch from './js/pixabay-api.js';\nimport generateImageElementsFromJSON from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport SimpleLightBox from 'simplelightbox';\n\nlet gallery = document.querySelector('.gallery');\nconst form = document.querySelector('.search-bar');\nconst btnSearch = document.querySelector('.btn-search');\nconst inputSearch = document.querySelector('.input-search');\nconst loader = document.querySelector('.loader-btn');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst dotAnimation = document.querySelector('.dot-animation');\nconst moreText = document.querySelector('.more-text');\nconst btnGoUp = document.querySelector('.btn-go-up');\nconst paginationEnd = document.querySelector('.pagination-end');\nlet currentPage = 1;\nlet searchVal = '';\n\nlet box = new SimpleLightBox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n  showCounter: false,\n});\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n  currentPage = 1;\n  loadMoreBtn.classList.add('hidden');\n  paginationEnd.classList.add('hidden');\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth'\n  });\n  searchVal = form.data.value.trim();\n  if (searchVal.length > 0){\n    btnSearch.classList.add('hidden');\n    loader.classList.remove('hidden');\n    injectElementsDataFromPixaBaySearch('46528220-f321f8a91f42a85f9ca952d44', searchVal)\n      .then((resData)=>{\n        setTimeout(()=>{\n          gallery.innerHTML = '';\n          gallery.appendChild(generateImageElementsFromJSON(resData.data));\n          box.refresh();\n          btnSearch.classList.remove('hidden');\n          loader.classList.add('hidden');\n          if (resData.maxPages>1){\n            loadMoreBtn.classList.remove('hidden');\n          }\n          const scrollTo = document.querySelector('.scroll');\n          scrollTo.classList.remove('scroll');\n        },500)\n      })\n      .catch((err)=>{\n        iziToast.error({title:err.message});\n      })\n  }else {\n    inputSearch.classList.add('blink');\n    setTimeout(()=>{inputSearch.classList.remove('blink');},500)\n  }\n\n});\n\nloadMoreBtn.addEventListener('click', e => {\n  dotAnimation.classList.remove('hidden');\n  moreText.classList.add('hidden');\n  setTimeout(()=>{\n    currentPage += 1;\n    injectElementsDataFromPixaBaySearch('46528220-f321f8a91f42a85f9ca952d44', searchVal,currentPage)\n      .then((resData)=>{\n        if (resData.data.length > 0){\n          gallery.appendChild(generateImageElementsFromJSON(resData.data));\n          box.refresh();\n        }\n        console.log(resData.maxPages + \" \" + currentPage);\n        if(currentPage === resData.maxPages){\n          loadMoreBtn.classList.add('hidden');\n          paginationEnd.classList.remove('hidden');\n        }\n        dotAnimation.classList.add('hidden');\n        moreText.classList.remove('hidden');\n        const scrollTo = document.querySelector('.scroll');\n        window.scrollBy({\n          top: scrollTo.getBoundingClientRect().top - 16,\n          behavior: 'smooth'\n        });\n        scrollTo.classList.remove('scroll');\n      })\n\n  },500);\n\n\n})\nbtnGoUp.addEventListener('click', e => {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth'\n  });\n})"],"names":["generateImageElementsFromJSON","json","createHTMLElementsFromString","htmlString","div","allImagesFrag","image","largeImageURL","webformatURL","likes","views","comments","downloads","SimpleLightBox","returnData","injectElementsDataFromPixaBaySearch","key","searchVal","page","perPage","requestOptions","data","axios","gallery","form","btnSearch","inputSearch","loader","loadMoreBtn","dotAnimation","moreText","btnGoUp","paginationEnd","currentPage","box","e","resData","err","iziToast","scrollTo"],"mappings":"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"}